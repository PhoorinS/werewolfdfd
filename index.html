<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏ú‡∏π‡πâ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡πÄ‡∏Å‡∏°‡πÅ‡∏ß‡∏£‡πå‡∏ß‡∏π‡∏•‡πå‡∏ü</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Prompt:wght@300;400;600&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- FontAwesome for Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>

    <div class="container">

        <!-- Header -->
        <header>
            <h1><i class="fa-solid fa-moon" style="margin-right: 12px;"></i>‡πÅ‡∏ß‡∏£‡πå‡∏ß‡∏π‡∏•‡πå‡∏ü <span
                    style="font-weight: 400; opacity: 0.8;">‡∏ú‡∏π‡πâ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡πÄ‡∏Å‡∏°</span></h1>
            <p style="text-align: center; color: var(--text-secondary); max-width: 500px; margin: 0 auto;">üåô
                ‡∏Ñ‡πà‡∏≥‡∏Ñ‡∏∑‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏∑‡∏î‡∏°‡∏¥‡∏î‡πÉ‡∏ô ‡∏Å‡∏Å‡∏°‡∏á. ‡πÅ‡∏•‡∏∞‡πÄ‡∏ï‡πá‡∏°‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å‡∏•‡∏±‡∏ö...</p>
        </header>

        <!-- SETUP SECTION -->
        <section id="setup-section" class="card">
            <!-- Player Count Input -->
            <div id="player-count-section"
                style="margin-bottom: 24px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 24px;">
                <h3 style="margin-bottom: 16px;"><i class="fa-solid fa-users-gear"
                        style="margin-right: 8px; opacity: 0.7;"></i>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô</h3>

                <div class="input-group">
                    <input type="number" id="player-count-input" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô (3-20)" min="3" max="20"
                        style="flex: 2;">
                    <button onclick="setPlayerCount()" style="flex: 1;"><i class="fa-solid fa-check"></i>
                        ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô</button>
                </div>

                <div id="player-count-display"
                    style="margin-top: 12px; text-align: center; font-size: 0.95rem; color: var(--text-secondary);">
                    <span id="player-count-status">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</span>
                </div>
            </div>

            <div id="role-randomizer"
                style="margin-bottom: 24px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 24px; opacity: 0.5; pointer-events: none;">
                <h3 style="margin-bottom: 16px;"><i class="fa-solid fa-dice"
                        style="margin-right: 8px; opacity: 0.7;"></i>‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó</h3>

                <!-- Mode Toggle -->
                <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                    <button id="mode-random-btn" class="secondary" onclick="setRoleMode('random')"
                        style="flex: 1; background: rgba(78, 205, 196, 0.2); border-color: #4ecdc4; color: #4ecdc4;">
                        <i class="fa-solid fa-shuffle"></i> ‡∏™‡∏∏‡πà‡∏°‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
                    </button>
                    <button id="mode-manual-btn" class="secondary" onclick="setRoleMode('manual')" style="flex: 1;">
                        <i class="fa-solid fa-hand-pointer"></i> ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÄ‡∏≠‡∏á
                    </button>
                </div>

                <!-- Random Mode UI -->
                <div id="random-mode-ui">
                    <div class="difficulty-buttons"
                        style="display: flex; gap: 10px; justify-content: center; margin-bottom: 15px; flex-wrap: wrap;">
                        <button class="secondary" onclick="toggleCustomSelector()"
                            style="flex: 100%; border-color: #9b59b6; color: #9b59b6; margin-bottom: 5px;"><i
                                class="fa-solid fa-gear"></i> ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó</button>

                        <button class="secondary" onclick="generateRoles('EASY')"
                            style="flex:1; border-color: #2ecc71; color: #2ecc71;">‡∏á‡πà‡∏≤‡∏¢</button>
                        <button class="secondary" onclick="generateRoles('MEDIUM')"
                            style="flex:1; border-color: #f1c40f; color: #f1c40f;">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á</button>
                        <button class="secondary" onclick="generateRoles('HARD')"
                            style="flex:1; border-color: #e74c3c; color: #e74c3c;">‡∏¢‡∏≤‡∏Å</button>
                    </div>

                    <div id="custom-role-selector"
                        style="display: none; background: rgba(0,0,0,0.4); padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #555;">
                        <h4 style="margin: 0 0 10px 0; color: #aaa;">‡∏î‡∏∂‡∏á‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ó‡∏µ‡πà‡∏ï‡∏¥‡πä‡∏Å‡∏ñ‡∏π‡∏Å:</h4>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <button class="secondary" onclick="toggleAllRoles(true)"
                                style="font-size: 0.8rem; padding: 5px 10px;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                            <button class="secondary" onclick="toggleAllRoles(false)"
                                style="font-size: 0.8rem; padding: 5px 10px;">‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏•‡∏¢</button>
                        </div>
                        <div id="custom-role-list"
                            style="display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 8px; max-height: 200px; overflow-y: auto;">
                            <!-- Checkboxes via JS -->
                        </div>
                        <p style="text-align:center; font-size:0.8rem; color:#888; margin-top:10px;">
                            ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° ‡∏á‡πà‡∏≤‡∏¢/‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á/‡∏¢‡∏≤‡∏Å ‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∏‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏Å‡∏≠‡∏á‡∏ô‡∏µ‡πâ
                        </p>
                    </div>
                </div>

                <!-- Manual Mode UI -->
                <div id="manual-mode-ui" style="display: none;">
                    <div
                        style="background: rgba(0,0,0,0.4); padding: 15px; border-radius: 8px; margin-bottom: 15px; border: 1px solid #555;">
                        <div
                            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <h4 style="margin: 0; color: #aaa;">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÅ‡∏•‡∏∞‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</h4>
                            <div id="role-count-display" style="color: #4ecdc4; font-weight: 600;">
                                ‡∏£‡∏ß‡∏°: <span id="total-roles-selected">0</span> / <span id="total-players-needed">0</span>
                            </div>
                        </div>

                        <!-- Villager Team -->
                        <div class="role-team-section" style="margin-bottom: 20px;">
                            <h5
                                style="color: #3498db; margin-bottom: 10px; border-bottom: 2px solid #3498db; padding-bottom: 5px;">
                                <i class="fa-solid fa-users"></i> ‡∏ù‡πà‡∏≤‡∏¢‡∏ä‡∏≤‡∏ß‡∏ö‡πâ‡∏≤‡∏ô
                            </h5>
                            <div id="manual-villager-roles" class="manual-role-grid"></div>
                        </div>

                        <!-- Wolf Team -->
                        <div class="role-team-section" style="margin-bottom: 20px;">
                            <h5
                                style="color: #e74c3c; margin-bottom: 10px; border-bottom: 2px solid #e74c3c; padding-bottom: 5px;">
                                <i class="fa-solid fa-wolf-pack-battalion"></i> ‡∏ù‡πà‡∏≤‡∏¢‡∏´‡∏°‡∏≤‡∏õ‡πà‡∏≤
                            </h5>
                            <div id="manual-wolf-roles" class="manual-role-grid"></div>
                        </div>

                        <!-- Solo Team -->
                        <div class="role-team-section" style="margin-bottom: 20px;">
                            <h5
                                style="color: #f1c40f; margin-bottom: 10px; border-bottom: 2px solid #f1c40f; padding-bottom: 5px;">
                                <i class="fa-solid fa-star"></i> ‡∏ù‡πà‡∏≤‡∏¢‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
                            </h5>
                            <div id="manual-solo-roles" class="manual-role-grid"></div>
                        </div>

                        <!-- Mixed Team -->
                        <div class="role-team-section">
                            <h5
                                style="color: #9b59b6; margin-bottom: 10px; border-bottom: 2px solid #9b59b6; padding-bottom: 5px;">
                                <i class="fa-solid fa-masks-theater"></i> ‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏Ñ‡∏ô‡∏Ñ‡∏£‡∏∂‡πà‡∏á‡∏£‡πâ‡∏≤‡∏¢
                            </h5>
                            <div id="manual-mixed-roles" class="manual-role-grid"></div>
                        </div>
                    </div>

                    <button class="secondary" onclick="generateManualRoles()"
                        style="width: 100%; background: rgba(78, 205, 196, 0.2); border-color: #4ecdc4; color: #4ecdc4;">
                        <i class="fa-solid fa-check"></i> ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ä‡∏∏‡∏î‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó
                    </button>
                </div>

                <div id="role-summary-box"
                    style="background: rgba(0,0,0,0.2); padding: 15px; border-radius: 8px; display: none; margin-bottom: 15px;">
                    <h4 style="margin: 0 0 10px 0; color: #aaa;">‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡πÉ‡∏ô‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ:</h4>
                    <div id="role-summary-list" style="display: flex; flex-wrap: wrap; gap: 8px;">
                        <!-- Badges/Tags for roles will go here -->
                    </div>
                </div>
                <button id="apply-roles-btn" onclick="applyRoles()"
                    style="width: 100%; display: none; background-color: #34495e;">‡πÉ‡∏ä‡πâ‡∏ä‡∏∏‡∏î‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏ô‡∏µ‡πâ</button>
            </div>

            <div id="player-registration-section" style="opacity: 0.5; pointer-events: none;">
                <h2 style="margin-top: 24px;"><i class="fa-solid fa-users"
                        style="margin-right: 8px; opacity: 0.7;"></i>‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô <span id="player-count"
                        style="font-size: 0.85em; opacity: 0.8; margin-left: 8px;"></span></h2>

                <div class="input-group">
                    <input type="text" id="player-input" placeholder="‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô...">
                    <button onclick="addPlayer()"><i class="fa-solid fa-plus"></i> ‡πÄ‡∏û‡∏¥‡πà‡∏°</button>
                </div>

                <div id="player-roster" style="margin-bottom: 20px;">
                    <!-- Player inputs with Role Dropdowns will go here -->
                    <p style="color: #666; font-style: italic; text-align: center;" id="empty-roster-msg">
                        ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô
                    </p>
                </div>
            </div>

            <button id="start-btn" onclick="startGame()" disabled
                style="width: 100%; margin-top: 24px; font-size: 1.1rem; padding: 16px; opacity: 0.5; cursor: not-allowed;"
                class="pulse"><i class="fa-solid fa-play" style="margin-right: 8px;"></i>‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
        </section>

        <!-- GAME DASHBOARD (Hidden initially) -->
        <main id="game-dashboard" class="hidden">

            <!-- Phase Indicator & Timer -->
            <div class="card phase-panel">
                <div class="phase-indicator" id="phase-display">‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô</div>
                <div class="timer-display" id="timer">05:00</div>
                <div class="phase-controls">
                    <button class="secondary" onclick="toggleTimer()" style="padding: 12px 20px;"><i
                            class="fa-solid fa-stopwatch" id="timer-icon"></i></button>
                    <button class="secondary" onclick="resetTimer()" style="padding: 12px 20px;"><i
                            class="fa-solid fa-rotate-right"></i></button>
                    <button onclick="nextPhase()" style="flex: 1;"><i class="fa-solid fa-forward"
                            style="margin-right: 6px;"></i>‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏ü‡∏™</button>
                </div>

                <!-- Narrator Voice Controls -->
                <div id="narrator-controls" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #444;">
                    <button onclick="startNarration()" id="narrate-btn" class="secondary"
                        style="width: 100%; background: rgba(167, 139, 250, 0.2); border-color: #a78bfa; color: #a78bfa; margin-bottom: 10px;">
                        <i class="fa-solid fa-volume-high" style="margin-right: 8px;"></i>‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏ú‡∏π‡πâ‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏¢
                    </button>
                    <div id="narration-playback"
                        style="display: none; flex-direction: column; gap: 8px; margin-bottom: 10px;">
                        <div id="current-narration"
                            style="font-size: 0.9rem; color: #a78bfa; text-align: center; min-height: 40px; padding: 10px; background: rgba(167, 139, 250, 0.1); border-radius: 8px; margin-bottom: 8px;">
                            <!-- Current narration text -->
                        </div>
                        <div style="display: flex; gap: 8px;">
                            <button onclick="previousNarration()" id="prev-narrate-btn" class="secondary"
                                style="flex: 1; padding: 10px; display: none;">
                                <i class="fa-solid fa-backward"></i> ‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤
                            </button>
                            <button onclick="nextNarration()" id="next-narrate-btn" class="secondary"
                                style="flex: 2; padding: 10px; background: rgba(78, 205, 196, 0.2); border-color: #4ecdc4; color: #4ecdc4;">
                                <i class="fa-solid fa-forward"></i> ‡∏ñ‡∏±‡∏î‡πÑ‡∏õ
                            </button>
                        </div>
                        <button onclick="stopNarration()" class="secondary"
                            style="width: 100%; padding: 8px; border-color: #ff6b6b; color: #ff6b6b;">
                            <i class="fa-solid fa-stop"></i> ‡∏´‡∏¢‡∏∏‡∏î‡πÅ‡∏•‡∏∞‡∏õ‡∏¥‡∏î
                        </button>
                    </div>
                </div>

                <div id="narrator-guide"
                    style="margin-top: 15px; padding-top: 10px; border-top: 1px solid #444; font-size: 0.9rem; color: #bbb;">
                    <!-- Narrator prompts go here -->
                </div>

                <!-- Reset Game Button -->
                <button onclick="resetGame()" class="secondary"
                    style="width:100%; margin-top:10px; border-color: #444; color: #666; font-size: 0.8rem;">‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡πÄ‡∏Å‡∏°</button>
            </div>

            <!-- Player List -->
            <div class="player-list" id="active-players">
                <!-- Players injected via JS -->
            </div>

        </main>

    </div>

    <!-- Role Reveal Modal (Optional use now) -->
    <div id="modal" class="modal" onclick="closeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <h2>‡∏ö‡∏ó‡∏ö‡∏≤‡∏ó‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏∑‡∏≠...</h2>
            <div class="role-reveal-text" id="modal-role-name">WEREWOLF</div>
            <p class="role-desc" id="modal-role-desc">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</p>
            <button onclick="closeModal()">‡∏£‡∏±‡∏ö‡∏ó‡∏£‡∏≤‡∏ö</button>
        </div>
    </div>

    <!-- Winner Modal -->
    <div id="winner-modal" class="modal">
        <div class="modal-content" style="border-color: var(--gold-color);">
            <h2 style="color: var(--gold-color); font-size: 2.5rem;">‡∏à‡∏ö‡πÄ‡∏Å‡∏°!</h2>
            <div class="role-reveal-text" id="winner-name" style="color: white; margin: 30px 0;">
                ‡∏ú‡∏π‡πâ‡∏ä‡∏ô‡∏∞: ‡∏ù‡πà‡∏≤‡∏¢‡∏ä‡∏≤‡∏ß‡∏ö‡πâ‡∏≤‡∏ô
            </div>
            <button onclick="resetGame()" class="pulse"
                style="background-color: var(--gold-color); color: black;">‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>